# 打包说明
建议使用阿里云的maven仓库，方便快捷。
```xml
  <mirrors>     
	<!--阿里云镜像-->
    <mirror>  
      <id>alimaven</id>  
      <name>aliyun maven</name>  
      <url>http://maven.aliyun.com/nexus/content/groups/public/</url>  
      <mirrorOf>central</mirrorOf>
	</mirror>
  </mirrors>
```
jar包和maven plugins下载无压力。下载下来之后可以正常编译、打包。

# 单元测试
默认情况下好像运行不了；因为Shiro Realm里有个东西注入不了。TODO

# 部署说明
1. 创建数据库  
建议和jdbc.properties文件中已有数据保持一致；如果不一致，改一下配置文件使之保持一致。
2. 执行初始化SQL  
执行document/P2P.sql和document/P2P_2.sql。原始SQL中有部分语法问题，我已修正。
3. 发布到Tomcat上  
发布成功后即可访问，默认访问地址是http://localhost:8080/P2Ppro/。  
访问首页时应该会看到打印一堆日志出来。

# 操作说明
1. 首页
建议把contextPath设置为/，也就是使用http://localhost:8080/访问首页。因为现有的JS文件上，所有AJAX请求的contextPath都是""。如果用http://localhost:8080/P2Ppro/访问，很多地方会出现404。  

2. 注册/登录
这个比较简单。  
我改了一下验证码的长度。默认5位数字，在我这里的图片上显示不完整，改成了4位数字。

3. 绑卡/解绑卡/充值/提现
进“我的账户”->“开通第三方”来绑卡。但是绑卡前需要完善个人资料，填写真实姓名和身份证号，否则绑卡时会报错（信息不完整不能绑卡）。  
默认情况下第三方操作（绑卡、解绑卡、充值、提现）都需要调另一个服务（http://localhost:8081）。我没有这个服务，所以在后台把返回值写死了。参见BankUtils这个类。  
另外，这几个页面一定要先登录、然后才能操作。如果停留在页面上、然后重启了服务，也是如此。因为后台向session中写入了数据，而在绑卡等接口中读取了session中的数据。不登录就获取不到session数据、进而抛出异常。  
没有找到解绑卡入口。  
绑卡、充值可以立即生效。充值成功后在“我的账户”->“资金记录”里就能看到充值记录。提现说是要“一两日内审核完成”，目测是要另一个服务有什么操作吧。  

4. 投资理财
进“投资理财”界面，选一个产品，点“立即投标”，输入金额、密码之类的，就可以完成一笔投资。投资成功后，在“我的账户”->“投资记录”里就能看到投资记录。




